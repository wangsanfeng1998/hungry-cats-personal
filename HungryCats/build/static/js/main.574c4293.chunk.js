(window["webpackJsonpnew-shopping-cart"]=window["webpackJsonpnew-shopping-cart"]||[]).push([[0],{102:function(e,t,a){},185:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(102),a(57)),l=a.n(o),u=a(87),s=a(3),p=a(17),m=(a(104),a(20)),d=a(227),f=a(228),b=a(48),g=a(226),E=a(225),h=a(231),O=a(230),y=a(91),j=a(229),v=a(94),S=a(232),w=a(219),k=a(220),z=a(221),x=a(222),P=a(223),C=a(88),D=a.n(C),I=a(224),N=a(90),A=a.n(N),L=a(218),F=a(187),q=a(58);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=Object(v.a)({palette:{primary:A.a}}),G=Object(y.a)({list:{width:350}});var M=Object(y.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}));function H(e){var t=e.product,a=e.productStates,n=M();return r.a.createElement("div",{className:n.root},r.a.createElement(F.a,{className:n.paper},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0},console.log(t),r.a.createElement(q.a,{className:n.image},r.a.createElement("img",{src:"data/products/"+t.sku+"_2.jpg",height:"100",width:"100"}))),r.a.createElement(L.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(L.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(L.a,{item:!0,xs:!0},r.a.createElement(b.a,{gutterBottom:!0,variant:"subtitle1"},t.title),r.a.createElement(b.a,{variant:"body2",gutterBottom:!0},t.size+" | "+t.style),r.a.createElement(b.a,{variant:"body2",color:"textSecondary"},"quantity: "+t.quantity)),r.a.createElement(L.a,{item:!0},r.a.createElement(w.a,{onClick:function(){return a.toggle(t,t.size,!0)}},"Remove"))),r.a.createElement(L.a,{item:!0},r.a.createElement(b.a,{variant:"subtitle1"},t.currencyFormat+" "+a.selected.reduce((function(e,t){return e.set(t,1+(e.get(t)||0))}),new Map).get(t)*parseFloat(t.price,10)))))))}function J(e){e.products;var t,a,n=e.productStates,c=e.cartState,i=e.setCartState,o=G();return r.a.createElement("div",null,r.a.createElement(I.a,{theme:W},r.a.createElement(w.a,{size:"large",color:"primary",onClick:function(){i(R({},c,Object(s.a)({},"right",!0)))}},r.a.createElement(D.a,null))),r.a.createElement(S.a,{anchor:"right",open:c.right,onClose:(t="right",a=!1,function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&i(R({},c,Object(s.a)({},t,a)))})},function(e,t,a,n){return r.a.createElement("div",{className:o.list,role:"presentation"},r.a.createElement(k.a,null,a.selected.map((function(e){return r.a.createElement(H,{key:e,product:e,productStates:a})}))),r.a.createElement(z.a,null),r.a.createElement(k.a,null,["All mail","Trash","Spam"].map((function(e,t){return r.a.createElement(x.a,{button:!0,key:e},r.a.createElement(P.a,{primary:e}))}))))}(0,0,n)))}var X=a(6),T=a.n(X),_=(a(86),a(92)),V=a.n(_),K={signInFlow:"popup",signInOptions:[T.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},U=function(){return r.a.createElement(V.a,{uiConfig:K,firebaseAuth:T.a.auth()})},Y=function(e){var t=e.user;return r.a.createElement(m.c,{color:"info"},r.a.createElement(m.c.Header,null,"Welcome, ",t.displayName,r.a.createElement(m.a,{primary:!0,onClick:function(){return T.a.auth().signOut()}},"Log out")))},Z=function(e){var t=e.user;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(Y,{user:t}):r.a.createElement(U,null))};function $(e){var t=e.children,a=e.window,n=Object(E.a)({disableHysteresis:!0,threshold:0,target:a?a():void 0});return r.a.cloneElement(t,{elevation:n?4:0})}var Q=Object(y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function ee(e){var t=e.props,a=e.products,n=e.productState,c=e.cartState,i=e.setCartState,o=e.user,l=Q(),u=r.a.useState(!0),s=Object(p.a)(u,2),m=s[0],E=(s[1],r.a.useState(null)),y=Object(p.a)(E,2),v=y[0],S=y[1];Boolean(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null),r.a.createElement($,t,r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{variant:"h5",className:l.title},r.a.createElement(Z,{user:o})),m&&r.a.createElement("div",null,r.a.createElement(j.a,{"aria-label":"shopping cart","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){!function(e){S(e.currentTarget)}(e)},color:"inherit"}),r.a.createElement(J,{products:a,productStates:n,cartState:c,setCartState:i}))))),r.a.createElement(f.a,null),r.a.createElement(O.a,null,r.a.createElement(h.a,{my:2})))}a(182);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}T.a.initializeApp({apiKey:"AIzaSyD3nnHJp02-ZeipmqAD60PjVr1vcIcJpfY",authDomain:"react-shopping-cart-7d1d3.firebaseapp.com",databaseURL:"https://react-shopping-cart-7d1d3.firebaseio.com/",projectId:"react-shopping-cart-7d1d3",storageBucket:"react-shopping-cart-7d1d3.appspot.com",messagingSenderId:"476849977207",appId:"1:476849977207:web:b7eff48e3e3eb3195ed372"});var ne=T.a.database().ref(),re=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],r=t[1];return[a,function(e,t,n){if(n){var c=a,i=c.findIndex((function(a){return a.sku===e.sku&&a.size===t}));i>-1&&(c[i].quantity-=1,0===c[i].quantity&&c.splice(i,1)),r(c.slice(0))}else{var o=a,l=o.findIndex((function(a){return a.sku===e.sku&&a.size===t.size}));l>-1?o[l].quantity+=1:o.push({title:e.title,style:e.style,sku:e.sku,currencyFormat:e.currencyFormat,price:e.price,quantity:1,size:t.size}),r(o)}}]},ce=function(e){return!!(ie(e,"S")&&ie(e,"M")&&ie(e,"L")&&ie(e,"XL"))},ie=function(e,t){return 0===e[t]},oe=function(e){e.allProducts;var t=e.product,a=e.productState,n=e.sizeState,c=e.cartState,i=e.setCartState,o=le();return r.a.createElement(F.a,{className:o.paper},r.a.createElement("img",{src:"data/products/"+t.sku+"_1.jpg",height:"250",width:"250"}),r.a.createElement("br",null),t.title,r.a.createElement("br",null),t.currencyFormat,t.price,r.a.createElement("br",null),r.a.createElement(m.a,{variant:"contained",className:o.button,disabled:ie(t,"S"),onClick:function(){n.setSize(ae({},n,Object(s.a)({},"size","S")))}},"S"),r.a.createElement(m.a,{variant:"contained",className:o.button,disabled:ie(t,"M"),onClick:function(){n.setSize(ae({},n,Object(s.a)({},"size","M")))}},"M"),r.a.createElement(m.a,{variant:"contained",className:o.button,disabled:ie(t,"L"),onClick:function(){n.setSize(ae({},n,Object(s.a)({},"size","L")))}},"L"),r.a.createElement(m.a,{variant:"contained",className:o.button,disabled:ie(t,"XL"),onClick:function(){n.setSize(ae({},n,Object(s.a)({},"size","XL")))}},"XL"),r.a.createElement("br",null),r.a.createElement(m.a,{disabled:ce(t),onClick:function(){a.toggle(t,n.selectedSize,!1),i(ae({},c,Object(s.a)({},"right",!0)))}},function(e,t,a){return ce(t)?"Out of Stock":"Add to cart"}(a.selected.includes(t),t,a.selected)))},le=Object(y.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(5),textAlign:"center",color:e.palette.text.secondary}}})),ue=function(){var e=Object(n.useState)({}),t=Object(p.a)(e,2),a=t[0],c=t[1],i=re(),o=Object(p.a)(i,2),s=o[0],d=o[1],f=Object.values(a),b=Object(n.useState)({right:!1}),g=Object(p.a)(b,2),E=g[0],h=g[1],O=Object(n.useState)({size:"S"}),y=Object(p.a)(O,2),j=y[0],v=y[1],S=Object(n.useState)(null),w=Object(p.a)(S,2),k=w[0],z=w[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/products.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=function(e){if(e.val()){var t={};Object.keys(a).map((function(n){return t[n]=Object.assign(a[n],e.val()[n])})),c(t)}},ne.on("value",n,(function(e){return alert(e)})),e.abrupt("return",(function(){ne.off("value",n)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){T.a.auth().onAuthStateChanged(z)}),[]),r.a.createElement(m.b,{maxwidth:"1000"},r.a.createElement(ee,{product:f,productState:{selected:s,toggle:d},cartState:E,setCartState:h,user:k}),r.a.createElement(L.a,{container:!0,spacing:3},f.map((function(e){return r.a.createElement(L.a,{item:!0,xs:3,key:e.sku},r.a.createElement(m.b,null,r.a.createElement(oe,{allProducts:f,product:e,productState:{selected:s,toggle:d},sizeState:{selectedSize:j,setSize:v},cartState:E,setCartState:h})))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e,t,a){e.exports=a(185)}},[[97,1,2]]]);
//# sourceMappingURL=main.574c4293.chunk.js.map